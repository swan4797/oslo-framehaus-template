---
// ========================================
// AREA SECTIONS GRID COMPONENT
// "Living in [area]" section with info cards
// Modern two-column header with grid layout
// ========================================

import AreaSectionCard from './AreaSectionCard.astro'
import type { AreaSection } from '../../../lib/area-guides'

interface Props {
  areaName: string
  localAmenities?: AreaSection | null
  schools?: AreaSection | null
  transport?: AreaSection | null
  demographics?: AreaSection | null
  hasContent: (section: AreaSection | null | undefined) => boolean
}

const { areaName, localAmenities, schools, transport, demographics, hasContent } = Astro.props

const hasAnySection = hasContent(localAmenities) || hasContent(schools) || hasContent(transport) || hasContent(demographics)

// Count available sections for description
const sectionCount = [localAmenities, schools, transport, demographics].filter(s => hasContent(s)).length
---

{hasAnySection && (
  <section class="area-sections">
    <div class="area-sections__container">
      <!-- Header -->
      <div class="area-sections__header">
        <h2 class="area-sections__title">
          Living in {areaName}
          <br />
          <em>What to Expect</em>
        </h2>
        <p class="area-sections__description">
          Discover everything you need to know about living in {areaName}, from local amenities and schools to transport links and community insights.
        </p>
      </div>

      <!-- Grid -->
      <div class="area-sections__grid">
        {hasContent(localAmenities) && (
          <AreaSectionCard
            title={localAmenities?.title || 'Local Amenities'}
            content={localAmenities?.content}
            icon="amenities"
          />
        )}

        {hasContent(schools) && (
          <AreaSectionCard
            title={schools?.title || 'Schools & Education'}
            content={schools?.content}
            icon="schools"
          />
        )}

        {hasContent(transport) && (
          <AreaSectionCard
            title={transport?.title || 'Transport Links'}
            content={transport?.content}
            icon="transport"
          />
        )}

        {hasContent(demographics) && (
          <AreaSectionCard
            title={demographics?.title || 'Community & Demographics'}
            content={demographics?.content}
            icon="demographics"
          />
        )}
      </div>
    </div>
  </section>
)}

<style lang="scss">
  @use '../../../styles/components/areas/area-sections-grid';
</style>
