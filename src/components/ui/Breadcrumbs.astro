---
// ========================================
// BREADCRUMBS COMPONENT
// Reusable navigation breadcrumbs
// ========================================

interface BreadcrumbItem {
  /** Display label for the breadcrumb */
  label: string
  /** URL to link to (omit for current page) */
  href?: string
}

interface Props {
  /** Array of breadcrumb items */
  items: BreadcrumbItem[]
  /** Aria label for accessibility */
  ariaLabel?: string
}

const {
  items,
  ariaLabel = 'Breadcrumb',
} = Astro.props

// Don't render if no items
if (!items || items.length === 0) {
  return null
}
---

<nav class="breadcrumbs" aria-label={ariaLabel}>
  <div class="breadcrumbs__container">
    <ol class="breadcrumbs__list">
      {items.map((item, index) => {
        const isLast = index === items.length - 1
        const isCurrent = !item.href || isLast

        return (
          <li class:list={[{ current: isCurrent }]} aria-current={isCurrent ? 'page' : undefined}>
            {item.href && !isLast ? (
              <a href={item.href}>{item.label}</a>
            ) : (
              <span>{item.label}</span>
            )}
          </li>
        )
      })}
    </ol>
  </div>
</nav>

<style>
  /* Base breadcrumbs styling - can be overridden by page styles */
  .breadcrumbs {
    background: #FFFFFF;
    border-bottom: 1px solid #EEECE9;
    padding: 1rem 2rem;
    margin-top: 1rem;
  }

  @media (max-width: 768px) {
    .breadcrumbs {
      padding: 0.875rem 1rem;
      margin-top: 4rem;
    }
  }

  .breadcrumbs__container {
    max-width: 1400px;
    margin: 0 auto;
  }

  .breadcrumbs__list {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
    list-style: none;
    margin: 0;
    padding: 0;
    font-size: 0.8125rem;
    letter-spacing: 0.01em;
  }

  .breadcrumbs__list li {
    display: flex;
    align-items: center;
  }

  .breadcrumbs__list li:not(:last-child)::after {
    content: '/';
    margin-left: 0.5rem;
    color: #B0B0B0;
  }

  .breadcrumbs__list a {
    color: #8A8A8A;
    text-decoration: none;
    transition: color 150ms ease;
  }

  .breadcrumbs__list a:hover {
    color: var(--color-primary, #C9A050);
  }

  .breadcrumbs__list .current {
    color: #4A4A4A;
    font-weight: 500;
  }

  .breadcrumbs__list .current span {
    max-width: 280px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    display: block;
  }

  @media (max-width: 768px) {
    .breadcrumbs__list .current span {
      max-width: 200px;
    }
  }
</style>
