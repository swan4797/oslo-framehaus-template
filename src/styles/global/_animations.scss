// ========================================
// GLOBAL ANIMATIONS
// Centralized keyframes, scroll-reveal, and animation utilities
// ========================================

@use 'variables' as *;

// ========================================
// KEYFRAMES - BASIC
// ========================================

// Fade animations
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

// Slide animations
@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-down {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-left {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slide-right {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

// Scale animations
@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes scale-out {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

// ========================================
// KEYFRAMES - SCROLL REVEAL
// ========================================

@keyframes reveal-up {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes reveal-down {
  from {
    opacity: 0;
    transform: translateY(-40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes reveal-left {
  from {
    opacity: 0;
    transform: translateX(40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes reveal-right {
  from {
    opacity: 0;
    transform: translateX(-40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes reveal-scale {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes reveal-fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

// ========================================
// KEYFRAMES - UTILITY
// ========================================

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

// ========================================
// ANIMATION CLASSES - BASIC
// ========================================

// Base animation setup
.animate {
  animation-duration: 0.5s;
  animation-fill-mode: both;
  animation-timing-function: ease-out;
}

// Fade animations
.animate-fade-in { animation-name: fade-in; }
.animate-fade-out { animation-name: fade-out; }

// Slide animations
.animate-slide-up { animation-name: slide-up; }
.animate-slide-down { animation-name: slide-down; }
.animate-slide-left { animation-name: slide-left; }
.animate-slide-right { animation-name: slide-right; }

// Scale animations
.animate-scale-in { animation-name: scale-in; }
.animate-scale-out { animation-name: scale-out; }

// Utility animations
.animate-bounce { animation: bounce 1s ease infinite; }
.animate-pulse { animation: pulse 2s ease-in-out infinite; }
.animate-spin { animation: spin 1s linear infinite; }
.animate-float { animation: float 3s ease-in-out infinite; }

// ========================================
// SCROLL REVEAL SYSTEM
// Uses data-reveal attribute for scroll-triggered animations
// ========================================

// Base state: hidden before reveal
[data-reveal] {
  opacity: 0;
  will-change: opacity, transform;
}

// Revealed state
[data-reveal].is-revealed {
  animation-duration: 0.7s;
  animation-fill-mode: both;
  animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

// Direction variants
[data-reveal="up"].is-revealed { animation-name: reveal-up; }
[data-reveal="down"].is-revealed { animation-name: reveal-down; }
[data-reveal="left"].is-revealed { animation-name: reveal-left; }
[data-reveal="right"].is-revealed { animation-name: reveal-right; }
[data-reveal="scale"].is-revealed { animation-name: reveal-scale; }
[data-reveal="fade"].is-revealed { animation-name: reveal-fade; }

// Default: up
[data-reveal=""].is-revealed,
[data-reveal]:not([data-reveal="up"]):not([data-reveal="down"]):not([data-reveal="left"]):not([data-reveal="right"]):not([data-reveal="scale"]):not([data-reveal="fade"]).is-revealed {
  animation-name: reveal-up;
}

// ========================================
// STAGGER CHILDREN SYSTEM
// Automatically staggers child animations
// ========================================

[data-reveal-stagger] {
  > * {
    opacity: 0;
    will-change: opacity, transform;
  }

  &.is-revealed > * {
    animation-name: reveal-up;
    animation-duration: 0.6s;
    animation-fill-mode: both;
    animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  // Stagger delays for children
  &.is-revealed > *:nth-child(1) { animation-delay: 0s; }
  &.is-revealed > *:nth-child(2) { animation-delay: 0.1s; }
  &.is-revealed > *:nth-child(3) { animation-delay: 0.2s; }
  &.is-revealed > *:nth-child(4) { animation-delay: 0.3s; }
  &.is-revealed > *:nth-child(5) { animation-delay: 0.4s; }
  &.is-revealed > *:nth-child(6) { animation-delay: 0.5s; }
  &.is-revealed > *:nth-child(7) { animation-delay: 0.6s; }
  &.is-revealed > *:nth-child(8) { animation-delay: 0.7s; }
  &.is-revealed > *:nth-child(9) { animation-delay: 0.8s; }
  &.is-revealed > *:nth-child(10) { animation-delay: 0.9s; }
  &.is-revealed > *:nth-child(11) { animation-delay: 1s; }
  &.is-revealed > *:nth-child(12) { animation-delay: 1.1s; }
}

// Faster stagger variant
[data-reveal-stagger="fast"] {
  &.is-revealed > *:nth-child(1) { animation-delay: 0s; }
  &.is-revealed > *:nth-child(2) { animation-delay: 0.05s; }
  &.is-revealed > *:nth-child(3) { animation-delay: 0.1s; }
  &.is-revealed > *:nth-child(4) { animation-delay: 0.15s; }
  &.is-revealed > *:nth-child(5) { animation-delay: 0.2s; }
  &.is-revealed > *:nth-child(6) { animation-delay: 0.25s; }
  &.is-revealed > *:nth-child(7) { animation-delay: 0.3s; }
  &.is-revealed > *:nth-child(8) { animation-delay: 0.35s; }
  &.is-revealed > *:nth-child(9) { animation-delay: 0.4s; }
  &.is-revealed > *:nth-child(10) { animation-delay: 0.45s; }
  &.is-revealed > *:nth-child(11) { animation-delay: 0.5s; }
  &.is-revealed > *:nth-child(12) { animation-delay: 0.55s; }
}

// ========================================
// ANIMATION DELAY CLASSES
// For manual staggered animations
// ========================================

.delay-100 { animation-delay: 0.1s; }
.delay-200 { animation-delay: 0.2s; }
.delay-300 { animation-delay: 0.3s; }
.delay-400 { animation-delay: 0.4s; }
.delay-500 { animation-delay: 0.5s; }
.delay-600 { animation-delay: 0.6s; }
.delay-700 { animation-delay: 0.7s; }
.delay-800 { animation-delay: 0.8s; }
.delay-900 { animation-delay: 0.9s; }
.delay-1000 { animation-delay: 1s; }

// Data attribute delays (for use with data-reveal-delay)
[data-reveal-delay="100"] { animation-delay: 0.1s; }
[data-reveal-delay="200"] { animation-delay: 0.2s; }
[data-reveal-delay="300"] { animation-delay: 0.3s; }
[data-reveal-delay="400"] { animation-delay: 0.4s; }
[data-reveal-delay="500"] { animation-delay: 0.5s; }

// ========================================
// ANIMATION DURATION CLASSES
// ========================================

.duration-fast { animation-duration: 0.15s; }
.duration-normal { animation-duration: 0.3s; }
.duration-slow { animation-duration: 0.5s; }
.duration-slower { animation-duration: 0.75s; }
.duration-slowest { animation-duration: 1s; }

// Data attribute durations
[data-reveal-duration="fast"].is-revealed { animation-duration: 0.4s; }
[data-reveal-duration="slow"].is-revealed { animation-duration: 1s; }

// ========================================
// TRANSITION UTILITIES
// ========================================

.transition-all { transition: all $transition-base; }
.transition-fast { transition: all $transition-fast; }
.transition-slow { transition: all $transition-slow; }
.transition-smooth { transition: all $transition-smooth; }

// ========================================
// HOVER EFFECTS
// ========================================

.hover-lift {
  transition: transform $transition-base, box-shadow $transition-base;

  &:hover {
    transform: translateY(-4px);
    box-shadow: $shadow-lg;
  }
}

.hover-scale {
  transition: transform $transition-base;

  &:hover {
    transform: scale(1.02);
  }
}

.hover-glow {
  transition: box-shadow $transition-base;

  &:hover {
    box-shadow: 0 0 20px rgba(var(--color-primary-rgb, 224, 122, 95), 0.3);
  }
}

// ========================================
// LOADING SKELETON
// ========================================

.skeleton {
  background: linear-gradient(
    90deg,
    $bg-secondary 25%,
    $bg-tertiary 50%,
    $bg-secondary 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: $radius-sm;
}

// ========================================
// ON-LOAD ANIMATIONS
// Elements that animate immediately on page load
// ========================================

[data-load="fade"] {
  animation: fade-in 0.6s ease-out both;
}

[data-load="up"] {
  animation: slide-up 0.6s ease-out both;
}

[data-load="down"] {
  animation: slide-down 0.6s ease-out both;
}

[data-load="scale"] {
  animation: scale-in 0.6s ease-out both;
}

// Load animation delays
[data-load-delay="100"] { animation-delay: 0.1s; }
[data-load-delay="200"] { animation-delay: 0.2s; }
[data-load-delay="300"] { animation-delay: 0.3s; }
[data-load-delay="400"] { animation-delay: 0.4s; }
[data-load-delay="500"] { animation-delay: 0.5s; }
[data-load-delay="600"] { animation-delay: 0.6s; }

// ========================================
// REDUCED MOTION
// Respects user preferences for accessibility
// ========================================

@media (prefers-reduced-motion: reduce) {
  // Disable all animations
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  // Remove opacity from reveal elements
  [data-reveal],
  [data-reveal-stagger] > * {
    opacity: 1 !important;
    transform: none !important;
  }

  // Disable specific animation classes
  .animate,
  .animate-fade-in,
  .animate-fade-out,
  .animate-slide-up,
  .animate-slide-down,
  .animate-slide-left,
  .animate-slide-right,
  .animate-scale-in,
  .animate-scale-out,
  .animate-bounce,
  .animate-pulse,
  .animate-spin,
  .animate-float {
    animation: none !important;
  }

  // Disable hover transforms
  .hover-lift:hover,
  .hover-scale:hover {
    transform: none !important;
  }

  // Disable component animations
  .intro-section,
  .content-block,
  .service-grid,
  .cta-banner,
  .branch-contact,
  .team-section,
  .property-card,
  .blog-card,
  .area-card {
    opacity: 1 !important;
    transform: none !important;
  }
}

// ========================================
// COMPONENT AUTO-ANIMATIONS
// Automatic scroll-reveal for common components
// Uses :not(.no-animate) to allow opt-out
// ========================================

// Section animations
.intro-section:not(.no-animate),
.content-block:not(.no-animate),
.static-full-content:not(.no-animate),
.cta-banner:not(.no-animate),
.branch-contact:not(.no-animate),
.branch-team:not(.no-animate),
.team-section:not(.no-animate) {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;

  &.is-revealed {
    opacity: 1;
    transform: translateY(0);
  }
}

// Hero animations (faster, more prominent)
.hero:not(.no-animate),
.static-hero:not(.no-animate),
.hero-split:not(.no-animate) {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;

  &.is-revealed {
    opacity: 1;
    transform: translateY(0);
  }
}

// Card grid stagger animations
.property-grid:not(.no-animate),
.team-grid:not(.no-animate),
.branches-grid:not(.no-animate),
.areas-grid:not(.no-animate),
.article-grid:not(.no-animate),
.service-grid__items:not(.no-animate) {
  > * {
    opacity: 0;
    transform: translateY(25px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  &.is-revealed > * {
    opacity: 1;
    transform: translateY(0);
  }

  // Stagger children
  &.is-revealed > *:nth-child(1) { transition-delay: 0s; }
  &.is-revealed > *:nth-child(2) { transition-delay: 0.08s; }
  &.is-revealed > *:nth-child(3) { transition-delay: 0.16s; }
  &.is-revealed > *:nth-child(4) { transition-delay: 0.24s; }
  &.is-revealed > *:nth-child(5) { transition-delay: 0.32s; }
  &.is-revealed > *:nth-child(6) { transition-delay: 0.4s; }
  &.is-revealed > *:nth-child(7) { transition-delay: 0.48s; }
  &.is-revealed > *:nth-child(8) { transition-delay: 0.56s; }
  &.is-revealed > *:nth-child(9) { transition-delay: 0.64s; }
  &.is-revealed > *:nth-child(10) { transition-delay: 0.72s; }
  &.is-revealed > *:nth-child(11) { transition-delay: 0.8s; }
  &.is-revealed > *:nth-child(12) { transition-delay: 0.88s; }
}

// Individual card animations (when not in grid)
.property-card:not(.no-animate),
.branch-card:not(.no-animate),
.team-card:not(.no-animate),
.area-card:not(.no-animate),
.blog-article-card:not(.no-animate),
.featured-blog-card:not(.no-animate) {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;

  &.is-revealed {
    opacity: 1;
    transform: translateY(0);
  }
}

// Stats and feature items (scale in)
.intro-section__stats:not(.no-animate),
.property-specs:not(.no-animate) {
  > * {
    opacity: 0;
    transform: scale(0.95);
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
  }

  &.is-revealed > * {
    opacity: 1;
    transform: scale(1);
  }

  // Quick stagger
  &.is-revealed > *:nth-child(1) { transition-delay: 0s; }
  &.is-revealed > *:nth-child(2) { transition-delay: 0.06s; }
  &.is-revealed > *:nth-child(3) { transition-delay: 0.12s; }
  &.is-revealed > *:nth-child(4) { transition-delay: 0.18s; }
  &.is-revealed > *:nth-child(5) { transition-delay: 0.24s; }
}

// Form sections
.form-section:not(.no-animate),
.enquiry-form:not(.no-animate),
.contact-form:not(.no-animate) {
  opacity: 0;
  transform: translateY(25px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;

  &.is-revealed {
    opacity: 1;
    transform: translateY(0);
  }
}

// Footer
.site-footer:not(.no-animate) {
  opacity: 0;
  transition: opacity 0.6s ease-out;

  &.is-revealed {
    opacity: 1;
  }
}
