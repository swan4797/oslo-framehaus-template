// ========================================
// SEARCH PAGE COMPONENT
// Property search results page with sidebar
// Using centralized color tokens from tokens/_colors.scss
// ========================================

@use '../tokens/colors' as colors;
@use '../tokens/effects' as effects;
@use '../tokens/spacing' as spacing;
@use '../tokens/typography' as typography;
@use '../mixins' as *;

// ----------------------------------------
// COMPONENT VARIABLES
// ----------------------------------------

$hero-gradient-start: colors.$color-primary;
$hero-gradient-end: colors.$color-primary-light;
$hero-padding-mobile: spacing.$spacing-8;
$hero-padding-desktop: spacing.$spacing-12;

$sidebar-width: 380px;
$sidebar-width-tablet: 320px;
$content-gap: spacing.$spacing-8;

$results-header-bg: colors.$color-bg-primary;
$results-header-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
$results-header-radius: effects.$radius-xl;

$state-container-bg: colors.$color-bg-primary;
$state-container-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
$state-container-radius: effects.$radius-xl;

// ----------------------------------------
// PAGE CONTAINER
// ----------------------------------------

.search-page {
  min-height: 100vh;
  background: colors.$color-bg-secondary;
}

// ----------------------------------------
// HERO HEADER
// ----------------------------------------

.search-page__hero {
  position: relative;
  background: colors.$color-bg-secondary;
  padding: $hero-padding-mobile 0;
  overflow: hidden;

  @include md {
    padding: $hero-padding-desktop 0;
  }
}

.search-page__hero-background {
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
  opacity: 0.6;
}

.search-page__hero-content {
  position: relative;
  z-index: 1;
}

.search-page__hero-title {
  font-size: clamp(2rem, 5vw, 3rem);
  font-weight: typography.$font-weight-bold;
  color: colors.$color-bg-primary;
  margin: 0 0 spacing.$spacing-3 0;
  text-align: center;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.search-page__hero-subtitle {
  font-size: clamp(0.9375rem, 2vw, 1.125rem);
  color: rgba(255, 255, 255, 0.9);
  text-align: center;
  margin: 0;
}

// ----------------------------------------
// MAIN CONTENT CONTAINER
// ----------------------------------------

.search-page__container {
  @include container;
}

.search-page__main {
  margin-top: -spacing.$spacing-6;
  padding-bottom: spacing.$spacing-16;

  @include mobile-only {
    padding-bottom: spacing.$spacing-12;
  }
}

// ----------------------------------------
// CONTENT GRID (Sidebar + Results)
// ----------------------------------------

.search-page__grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1em;
  align-items: start;

  @include lg {
    grid-template-columns: $sidebar-width-tablet 1fr;
  }

  @include xl {
    grid-template-columns: $sidebar-width 1fr;
    gap: $content-gap;
  }
}

// ----------------------------------------
// SIDEBAR
// ----------------------------------------

.search-page__sidebar {
  position: sticky;
  top: 10px;
}

.search-page__sidebar-sticky {
  position: static;

  @include lg {
    position: sticky;
    top: spacing.$spacing-8;
  }
}

// ----------------------------------------
// RESULTS SECTION
// ----------------------------------------

.search-page__results {
  min-height: 500px;
  z-index: 1;
}

// ----------------------------------------
// RESULTS HEADER
// ----------------------------------------

.search-page__results-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: spacing.$spacing-4;
  padding: spacing.$spacing-6 spacing.$spacing-8;
  background: colors.$color-bg-secondary;
  border-radius: $results-header-radius;
  box-shadow: $results-header-shadow;
  border: 1px solid colors.$color-border-light;
  margin-bottom: spacing.$spacing-8;

  @include mobile-only {
    padding: spacing.$spacing-5 spacing.$spacing-6;
  }
}

.search-page__results-meta {
  flex: 1;
  min-width: 200px;
}

.search-page__results-count {
  font-size: typography.$font-size-2xl;
  font-weight: typography.$font-weight-bold;
  color: colors.$color-text-primary;
  margin: 0 0 spacing.$spacing-2 0;
  display: flex;
  align-items: baseline;
  gap: spacing.$spacing-2;
}

.search-page__count-number {
  color: colors.$color-primary;
}

.search-page__count-text {
  font-size: typography.$font-size-lg;
  color: colors.$color-text-secondary;
  font-weight: typography.$font-weight-semibold;
}

.search-page__results-location {
  display: flex;
  align-items: center;
  gap: spacing.$spacing-2;
  color: colors.$color-text-secondary;
  font-size: typography.$font-size-sm;
  margin: 0;
}

.search-page__location-icon {
  color: colors.$color-text-muted;
  flex-shrink: 0;
}

// ----------------------------------------
// RESULTS CONTROLS
// ----------------------------------------

.search-page__controls {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  width: 100%;
  gap: spacing.$spacing-4;

  @include sm {
    flex-direction: row;
    align-items: center;
    width: auto;
  }
}

.search-page__filters-badge {
  display: flex;
  align-items: center;
  gap: spacing.$spacing-2;
  padding: spacing.$spacing-2 spacing.$spacing-4;
  background: colors.$color-bg-secondary;
  color: colors.$color-bg-primary;
  border-radius: 999px;
  font-size: typography.$font-size-sm;
  font-weight: typography.$font-weight-semibold;
}

.search-page__badge-icon {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

// ----------------------------------------
// SORT CONTROL
// ----------------------------------------

.search-page__sort {
  display: flex;
  align-items: center;
  gap: spacing.$spacing-2;
  width: 100%;
  justify-content: space-between;

  @include sm {
    width: auto;
    justify-content: flex-start;
  }
}

.search-page__sort-label {
  font-size: typography.$font-size-sm;
  font-weight: typography.$font-weight-semibold;
  color: colors.$color-text-secondary;
}

.search-page__sort-select {
  padding: spacing.$spacing-2 spacing.$spacing-10 spacing.$spacing-2 spacing.$spacing-4;
  background: colors.$color-bg-secondary;
  border: 1px solid colors.$color-border-light;
  border-radius: effects.$radius-md;
  font-family: typography.$font-family-base;
  font-size: typography.$font-size-sm;
  color: colors.$color-text-primary;
  font-weight: typography.$font-weight-medium;
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right spacing.$spacing-3 center;
  transition: border-color effects.$transition-fast, background effects.$transition-fast, box-shadow effects.$transition-fast;
  flex: 1;

  @include sm {
    flex: none;
  }

  &:hover {
    border-color: colors.$color-border-medium;
    background-color: colors.$color-bg-secondary;
  }

  &:focus {
    outline: none;
    border-color: colors.$color-primary;
    box-shadow: 0 0 0 3px rgba(colors.$color-primary, 0.1);
  }
}

// ----------------------------------------
// MAP VIEW LINK
// ----------------------------------------

.search-page__map-link {
  display: inline-flex;
  align-items: center;
  gap: spacing.$spacing-2;
  padding: spacing.$spacing-2 spacing.$spacing-4;
  background: colors.$color-bg-secondary;
  border: 1px solid colors.$color-border-light;
  border-radius: effects.$radius-md;
  font-size: typography.$font-size-sm;
  font-weight: typography.$font-weight-medium;
  color: colors.$color-text-primary;
  text-decoration: none;
  transition: border-color effects.$transition-fast, background effects.$transition-fast, color effects.$transition-fast;
  white-space: nowrap;

  &:hover {
    border-color: colors.$color-primary;
    color: colors.$color-primary;
    background: colors.$color-bg-secondary;
  }

  &:focus {
    outline: none;
    border-color: colors.$color-primary;
    box-shadow: 0 0 0 3px rgba(colors.$color-primary, 0.1);
  }
}

.search-page__map-icon {
  flex-shrink: 0;
  color: currentColor;
}

// ----------------------------------------
// PROPERTY GRID
// ----------------------------------------

.search-page__property-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: spacing.$spacing-6;

  @include sm {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }

  @include xl {
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  }
}

// ----------------------------------------
// PAGINATION
// ----------------------------------------

.search-page__pagination {
  margin-top: spacing.$spacing-12;
}

// ----------------------------------------
// STATE CONTAINERS (Error/Empty)
// ----------------------------------------

.search-page__state {
  background: colors.$color-bg-secondary;
  border-radius: $state-container-radius;
  box-shadow: $state-container-shadow;
  border: 1px solid colors.$color-border-light;
  padding: spacing.$spacing-16 spacing.$spacing-8;
  text-align: center;

  @include mobile-only {
    padding: spacing.$spacing-12 spacing.$spacing-6;
  }
}

.search-page__state-icon {
  width: 5rem;
  height: 5rem;
  margin: 0 auto spacing.$spacing-6;

  @include mobile-only {
    width: 4rem;
    height: 4rem;
  }
}

.search-page__state-icon--error {
  color: colors.$color-error;
}

.search-page__state-icon--empty {
  color: colors.$color-text-muted;
}

.search-page__state-title {
  font-size: typography.$font-size-2xl;
  font-weight: typography.$font-weight-bold;
  color: colors.$color-text-primary;
  margin: 0 0 spacing.$spacing-3 0;
}

.search-page__state-message {
  font-size: typography.$font-size-base;
  color: colors.$color-text-secondary;
  margin: 0 0 spacing.$spacing-8 0;
  line-height: typography.$line-height-relaxed;
}

// ----------------------------------------
// SUGGESTIONS (Empty State)
// ----------------------------------------

.search-page__suggestions {
  max-width: 400px;
  margin: 0 auto spacing.$spacing-8;
  padding: spacing.$spacing-6;
  background: colors.$color-bg-secondary;
  border-radius: effects.$radius-md;
  text-align: left;
}

.search-page__suggestions-title {
  font-size: typography.$font-size-sm;
  font-weight: typography.$font-weight-bold;
  color: colors.$color-text-primary;
  margin: 0 0 spacing.$spacing-3 0;
}

.search-page__suggestions-list {
  margin: 0;
  padding-left: spacing.$spacing-6;
  list-style: disc;

  li {
    font-size: typography.$font-size-sm;
    color: colors.$color-text-secondary;
    margin-bottom: spacing.$spacing-2;

    &:last-child {
      margin-bottom: 0;
    }
  }
}

// ----------------------------------------
// STATE BUTTON
// ----------------------------------------

.search-page__state-button {
  display: inline-flex;
  align-items: center;
  gap: spacing.$spacing-2;
  padding: spacing.$spacing-4 spacing.$spacing-6;
  background: colors.$color-bg-secondary;
  color: colors.$color-bg-primary;
  text-decoration: none;
  border-radius: effects.$radius-md;
  font-size: typography.$font-size-sm;
  font-weight: typography.$font-weight-semibold;
  transition: background effects.$transition-fast, transform effects.$transition-fast, box-shadow effects.$transition-fast;

  &:hover {
    background: colors.$color-bg-secondary;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(colors.$color-primary, 0.3);
  }

  &:active {
    transform: translateY(0);
  }
}
